{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":dependencyDashboard"
  ],
  "timezone": "America/New_York",
  "schedule": [
    "before 5am on Monday"
  ],
  "enabledManagers": [
    "dockerfile",
    "docker-compose",
    "github-actions",
    "gomod",
    "pip_requirements",
    "regex"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": [
        "^apps/tinyolly/templates/.*\\.html$"
      ],
      "matchStrings": [
        "https://cdnjs\\.cloudflare\\.com/ajax/libs/(?<depName>[^/]+)/(?<currentValue>[^/]+)/[^\"]+",
        "https://cdn\\.jsdelivr\\.net/npm/(?<depName>[^@]+)@(?<currentValue>[^/]+)/[^\"]+",
        "https://unpkg\\.com/(?<depName>[^@]+)@(?<currentValue>[^/]+)/[^\"]+"
      ],
      "datasourceTemplate": "npm",
      "versioningTemplate": "npm"
    }
  ],
  "packageRules": [
    {
      "description": "Group Python packages by app",
      "matchManagers": [
        "pip_requirements"
      ],
      "matchFileNames": [
        "apps/tinyolly/**"
      ],
      "groupName": "tinyolly Python dependencies"
    },
    {
      "description": "Group demo app dependencies separately",
      "matchManagers": [
        "pip_requirements"
      ],
      "matchFileNames": [
        "apps/demo/**",
        "apps/ai-agent-demo/**"
      ],
      "groupName": "demo apps Python dependencies"
    },
    {
      "description": "Group documentation dependencies",
      "matchManagers": [
        "pip_requirements"
      ],
      "matchFileNames": [
        "docs/**"
      ],
      "groupName": "documentation dependencies"
    },
    {
      "description": "OpAMP server Go dependencies",
      "matchManagers": [
        "gomod"
      ],
      "matchFileNames": [
        "apps/opamp-server/**"
      ],
      "groupName": "opamp-server Go dependencies"
    },
    {
      "description": "Group all Docker base images",
      "matchDatasources": [
        "docker"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "groupName": "Docker base images"
    },
    {
      "description": "Separate major Docker updates",
      "matchDatasources": [
        "docker"
      ],
      "matchUpdateTypes": [
        "major"
      ],
      "dependencyDashboardApproval": true
    },
    {
      "description": "Pin Redis version (critical for data)",
      "matchPackageNames": [
        "redis"
      ],
      "matchDatasources": [
        "docker"
      ],
      "enabled": false
    },
    {
      "description": "Auto-merge non-major Python packages in dev apps",
      "matchManagers": [
        "pip_requirements"
      ],
      "matchFileNames": [
        "apps/demo/**",
        "apps/ai-agent-demo/**"
      ],
      "matchUpdateTypes": [
        "patch",
        "minor"
      ],
      "automerge": true,
      "automergeType": "pr"
    }
  ],
  "digest": {
    "enabled": true,
    "dependencyDashboardApproval": true
  },
  "vulnerabilityAlerts": {
    "enabled": true,
    "labels": [
      "security"
    ]
  },
  "labels": [
    "dependencies",
    "renovate"
  ]
}
